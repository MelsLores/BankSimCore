<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="es"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Transaction.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCo Coverage Report</a> &gt; <a href="index.source.html" class="el_package">com.banksim.model</a> &gt; <span class="el_source">Transaction.java</span></div><h1>Transaction.java</h1><pre class="source lang-java linenums">package com.banksim.model;

import java.math.BigDecimal;
import java.time.LocalDateTime;
import java.util.UUID;

/**
 * Transaction entity representing financial transactions.
 * Each transaction is linked to an account and records the balance changes.
 * Supports various transaction types: DEPOSIT, WITHDRAWAL, TRANSFER_IN, TRANSFER_OUT, FEE, INTEREST.
 * 
 * @author Jorge Pena - REM Consultancy
 * @version 1.0
 * @since 2024
 */
public class Transaction {
    
    /**
     * Transaction type enumeration
     */
<span class="nc" id="L21">    public enum TransactionType {</span>
<span class="nc" id="L22">        DEPOSIT,</span>
<span class="nc" id="L23">        WITHDRAWAL,</span>
<span class="nc" id="L24">        TRANSFER_IN,</span>
<span class="nc" id="L25">        TRANSFER_OUT,</span>
<span class="nc" id="L26">        FEE,</span>
<span class="nc" id="L27">        INTEREST</span>
    }
    
    /**
     * Transaction status enumeration
     */
<span class="nc" id="L33">    public enum TransactionStatus {</span>
<span class="nc" id="L34">        PENDING,</span>
<span class="nc" id="L35">        COMPLETED,</span>
<span class="nc" id="L36">        FAILED,</span>
<span class="nc" id="L37">        REVERSED</span>
    }
    
    private Integer transactionId;
    private UUID transactionUuid;
    private Integer accountId;
    private TransactionType transactionType;
    private BigDecimal amount;
    private BigDecimal balanceBefore;
    private BigDecimal balanceAfter;
    private String description;
    private String referenceNumber;
    private Integer relatedAccountId;
    private TransactionStatus status;
    private LocalDateTime createdAt;
    
    /**
     * Default constructor
     */
<span class="nc" id="L56">    public Transaction() {</span>
<span class="nc" id="L57">        this.transactionUuid = UUID.randomUUID();</span>
<span class="nc" id="L58">        this.status = TransactionStatus.COMPLETED;</span>
<span class="nc" id="L59">        this.createdAt = LocalDateTime.now();</span>
<span class="nc" id="L60">    }</span>
    
    /**
     * Parameterized constructor for transaction creation
     * 
     * @param accountId Account ID
     * @param transactionType Type of transaction
     * @param amount Transaction amount
     * @param balanceBefore Balance before transaction
     * @param balanceAfter Balance after transaction
     * @param description Transaction description
     */
    public Transaction(Integer accountId, TransactionType transactionType, BigDecimal amount,
                      BigDecimal balanceBefore, BigDecimal balanceAfter, String description) {
<span class="nc" id="L74">        this();</span>
<span class="nc" id="L75">        this.accountId = accountId;</span>
<span class="nc" id="L76">        this.transactionType = transactionType;</span>
<span class="nc" id="L77">        this.amount = amount;</span>
<span class="nc" id="L78">        this.balanceBefore = balanceBefore;</span>
<span class="nc" id="L79">        this.balanceAfter = balanceAfter;</span>
<span class="nc" id="L80">        this.description = description;</span>
<span class="nc" id="L81">    }</span>
    
    // Getters and Setters
    
    /**
     * Gets the transaction ID
     * @return Transaction ID
     */
    public Integer getTransactionId() {
<span class="nc" id="L90">        return transactionId;</span>
    }
    
    /**
     * Sets the transaction ID
     * @param transactionId Transaction ID
     */
    public void setTransactionId(Integer transactionId) {
<span class="nc" id="L98">        this.transactionId = transactionId;</span>
<span class="nc" id="L99">    }</span>
    
    /**
     * Gets the transaction UUID
     * @return Unique transaction UUID
     */
    public UUID getTransactionUuid() {
<span class="nc" id="L106">        return transactionUuid;</span>
    }
    
    /**
     * Sets the transaction UUID
     * @param transactionUuid Transaction UUID
     */
    public void setTransactionUuid(UUID transactionUuid) {
<span class="nc" id="L114">        this.transactionUuid = transactionUuid;</span>
<span class="nc" id="L115">    }</span>
    
    /**
     * Gets the account ID
     * @return Account ID
     */
    public Integer getAccountId() {
<span class="nc" id="L122">        return accountId;</span>
    }
    
    /**
     * Sets the account ID
     * @param accountId Account ID
     */
    public void setAccountId(Integer accountId) {
<span class="nc" id="L130">        this.accountId = accountId;</span>
<span class="nc" id="L131">    }</span>
    
    /**
     * Gets the transaction type
     * @return Transaction type
     */
    public TransactionType getTransactionType() {
<span class="nc" id="L138">        return transactionType;</span>
    }
    
    /**
     * Sets the transaction type
     * @param transactionType Transaction type
     */
    public void setTransactionType(TransactionType transactionType) {
<span class="nc" id="L146">        this.transactionType = transactionType;</span>
<span class="nc" id="L147">    }</span>
    
    /**
     * Gets the transaction amount
     * @return Transaction amount
     */
    public BigDecimal getAmount() {
<span class="nc" id="L154">        return amount;</span>
    }
    
    /**
     * Sets the transaction amount
     * @param amount Transaction amount
     */
    public void setAmount(BigDecimal amount) {
<span class="nc" id="L162">        this.amount = amount;</span>
<span class="nc" id="L163">    }</span>
    
    /**
     * Gets the balance before transaction
     * @return Balance before
     */
    public BigDecimal getBalanceBefore() {
<span class="nc" id="L170">        return balanceBefore;</span>
    }
    
    /**
     * Sets the balance before transaction
     * @param balanceBefore Balance before
     */
    public void setBalanceBefore(BigDecimal balanceBefore) {
<span class="nc" id="L178">        this.balanceBefore = balanceBefore;</span>
<span class="nc" id="L179">    }</span>
    
    /**
     * Gets the balance after transaction
     * @return Balance after
     */
    public BigDecimal getBalanceAfter() {
<span class="nc" id="L186">        return balanceAfter;</span>
    }
    
    /**
     * Sets the balance after transaction
     * @param balanceAfter Balance after
     */
    public void setBalanceAfter(BigDecimal balanceAfter) {
<span class="nc" id="L194">        this.balanceAfter = balanceAfter;</span>
<span class="nc" id="L195">    }</span>
    
    /**
     * Gets the transaction description
     * @return Description
     */
    public String getDescription() {
<span class="nc" id="L202">        return description;</span>
    }
    
    /**
     * Sets the transaction description
     * @param description Transaction description
     */
    public void setDescription(String description) {
<span class="nc" id="L210">        this.description = description;</span>
<span class="nc" id="L211">    }</span>
    
    /**
     * Gets the reference number
     * @return Reference number
     */
    public String getReferenceNumber() {
<span class="nc" id="L218">        return referenceNumber;</span>
    }
    
    /**
     * Sets the reference number
     * @param referenceNumber Reference number
     */
    public void setReferenceNumber(String referenceNumber) {
<span class="nc" id="L226">        this.referenceNumber = referenceNumber;</span>
<span class="nc" id="L227">    }</span>
    
    /**
     * Gets the related account ID (for transfers)
     * @return Related account ID
     */
    public Integer getRelatedAccountId() {
<span class="nc" id="L234">        return relatedAccountId;</span>
    }
    
    /**
     * Sets the related account ID (for transfers)
     * @param relatedAccountId Related account ID
     */
    public void setRelatedAccountId(Integer relatedAccountId) {
<span class="nc" id="L242">        this.relatedAccountId = relatedAccountId;</span>
<span class="nc" id="L243">    }</span>
    
    /**
     * Gets the transaction status
     * @return Transaction status
     */
    public TransactionStatus getStatus() {
<span class="nc" id="L250">        return status;</span>
    }
    
    /**
     * Sets the transaction status
     * @param status Transaction status
     */
    public void setStatus(TransactionStatus status) {
<span class="nc" id="L258">        this.status = status;</span>
<span class="nc" id="L259">    }</span>
    
    /**
     * Gets the creation timestamp
     * @return Created date/time
     */
    public LocalDateTime getCreatedAt() {
<span class="nc" id="L266">        return createdAt;</span>
    }
    
    /**
     * Sets the creation timestamp
     * @param createdAt Created date/time
     */
    public void setCreatedAt(LocalDateTime createdAt) {
<span class="nc" id="L274">        this.createdAt = createdAt;</span>
<span class="nc" id="L275">    }</span>
    
    // Business methods
    
    /**
     * Checks if transaction is completed
     * @return true if completed, false otherwise
     */
    public boolean isCompleted() {
<span class="nc bnc" id="L284" title="All 2 branches missed.">        return this.status == TransactionStatus.COMPLETED;</span>
    }
    
    /**
     * Checks if transaction is pending
     * @return true if pending, false otherwise
     */
    public boolean isPending() {
<span class="nc bnc" id="L292" title="All 2 branches missed.">        return this.status == TransactionStatus.PENDING;</span>
    }
    
    /**
     * Checks if transaction is a transfer
     * @return true if transfer, false otherwise
     */
    public boolean isTransfer() {
<span class="nc bnc" id="L300" title="All 4 branches missed.">        return this.transactionType == TransactionType.TRANSFER_IN || </span>
               this.transactionType == TransactionType.TRANSFER_OUT;
    }
    
    /**
     * Marks transaction as completed
     */
    public void complete() {
<span class="nc" id="L308">        this.status = TransactionStatus.COMPLETED;</span>
<span class="nc" id="L309">    }</span>
    
    /**
     * Marks transaction as failed
     */
    public void fail() {
<span class="nc" id="L315">        this.status = TransactionStatus.FAILED;</span>
<span class="nc" id="L316">    }</span>
    
    /**
     * Reverses a transaction (for cancellations)
     */
    public void reverse() {
<span class="nc" id="L322">        this.status = TransactionStatus.REVERSED;</span>
<span class="nc" id="L323">    }</span>
    
    @Override
    public String toString() {
<span class="nc" id="L327">        return &quot;Transaction{&quot; +</span>
                &quot;transactionId=&quot; + transactionId +
                &quot;, transactionUuid=&quot; + transactionUuid +
                &quot;, transactionType=&quot; + transactionType +
                &quot;, amount=&quot; + amount +
                &quot;, balanceBefore=&quot; + balanceBefore +
                &quot;, balanceAfter=&quot; + balanceAfter +
                &quot;, status=&quot; + status +
                &quot;, createdAt=&quot; + createdAt +
                '}';
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.11.202310140853</span></div></body></html>